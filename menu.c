/*
 * menu.c
 *
 *  Created on: 26 nov 2023
 *      Author: arlet
 */

#include "menu.h"

static uint8_t test[] = {0xFF,0x01,0xFD,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0xFD,0x01,0xFF,
				  0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
				  0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
		          0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
		          0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
				  0xFF,0x80,0xBF,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xBF,0x80,0xFF};

//uint8_t CURRENT_GAME[504] = {
//		0xFF,0x01,0x01,0xF1,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0xF1,0x01,0x01,0XFF,0X00,0X00,0X80,0X80,
//		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0XFF,0X80,0X80,0X8F,0X88,0X88,0XFF,0X00,
//		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
//		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0XFF,0X01,0X01,0xF1,0X11,0X11,0XFF,0X00,
//		0xFF,0X80,0X80,0x8F,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x8F,0x80,0x80,0XFF,0X00,0x00,0x01,0x01,
//		};

uint8_t CURRENT_GAME[504] = {
		0xFF,0x01,0x01,0xF1,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0xF1,0x01,0x01,0XFF,0X00,0X00,0X80,0X80,
		0xFF,0x00,0x00,0xFF,0x00,0x18,0x66,0x81,0x81,0x81,0x81,0x81,0xFF,0xFF,0x81,0x81,0x81,0x81,0x81,0x66,0x18,0x18,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7E,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0XFF,0X80,0X80,0X8F,0X88,0X88,0XFF,0X00,
		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0xFF,0x00,0x00,0xFF,0x00,0x18,0x7E,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x7E,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0XFF,0X01,0X01,0xF1,0X11,0X11,0XFF,0X00,
		0xFF,0X80,0X80,0x8F,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x8F,0x80,0x80,0XFF,0X00,0x00,0x01,0x01,
		};

const uint8_t black_up[] 	= {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7E,0x18};
const uint8_t black_down[] 	= {0x18,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF};

const uint8_t white_up[] 	= {0xFF,0x81,0x81,0x81,0x81,0x81,0x66,0x18};
const uint8_t white_down[] 	= {0x18,0x66,0x81,0x81,0x81,0x81,0x81,0xFF};

const uint8_t line_up[]  	= {0x99,0x99,0x99,0x99,0x99,0x99,0x7E,0x18};
const uint8_t line_down[]  	= {0x18,0x7E,0x99,0x99,0x99,0x99,0x99,0x99};

const uint8_t white_l[] = {0xFC,0x82,0x82,0x81,0x81,0x82,0x82,0xFC};
const uint8_t black_l[] = {0xFC,0xFE,0xFE,0xFF,0xFF,0xFE,0xFE,0xFC};
const uint8_t line_l[]  = {0xFC,0x82,0x82,0xFF,0xFF,0x82,0x82,0xFC};

const uint8_t white_r[] = {0x3F,0x41,0x41,0x81,0x81,0x41,0x41,0x3F};
const uint8_t black_r[] = {0x3F,0x7F,0x7F,0xFF,0xFF,0x7F,0x7F,0x3F};
const uint8_t line_r[]  = {0x3F,0x41,0x41,0xFF,0xFF,0x41,0x41,0x3F};

const uint8_t white_v[] = {0x18,0x66,0x42,0x81,0x81,0x42,0x66,0x18};
const uint8_t black_v[] = {0x18,0x7E,0x7E,0xFF,0xFF,0x7E,0x7E,0x18};
const uint8_t line_v[]  = {0x18,0x66,0x42,0xFF,0xFF,0x42,0x66,0x18};



static uint8_t string_1[] = "LEVEL"; 	/*! String to be printed in the LCD*/
static uint8_t string_2[] = "0"; 		/*! String to be printed in the LCD*/
static uint8_t string_3[] = "SPEED"; 	/*! String to be printed in the LCD*/
static uint8_t string_4[] = "LOW"; 		/*! String to be printed in the LCD*/
static uint8_t string_5[] = "MED"; 		/*! String to be printed in the LCD*/
static uint8_t string_6[] = "HIG"; 	/*! String to be printed in the LCD*/

static uint8_t count_level = 0;
static uint8_t count_speed = 0;


void MENU_init(void){

	LCD_nokia_clear();
	LCD_nokia_bitmap(test);
	LCD_nokia_goto_xy(4,1); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_1[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(20,3); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_2[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(45,1); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_3[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(52,3); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_4[0]); 	/*! It print a string stored in an array*/
}

void MENU_SetLevel(void){

	if(true == !GPIO_PinRead(GPIOA, BTN_right)){
		if(count_level < 5){
			count_level++;
		}
		else{
			count_level = count_level;
		}
	}
	else if(true == !GPIO_PinRead(GPIOA, BTN_left)){
		if(count_level > 0){
			count_level--;
		}
		else{
			count_level = count_level;
		}
	}
	MENU_PrintLevel(count_level);
}

void MENU_PrintLevel(uint8_t level){

	switch(level){
	case 0:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('0');
		break;
	case 1:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('1');
		break;
	case 2:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('2');
		break;
	case 3:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('3');
		break;
	case 4:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('4');
		break;
	case 5:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('5');
		break;
	default:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('0');
		break;
	}
}

void MENU_SetSpeed(void){

	if(true == !GPIO_PinRead(GPIOA, BTN_right)){
		if(count_speed < 2){
			count_speed++;
		}
		else{
			count_speed = count_speed;
		}
	}
	else if(true == !GPIO_PinRead(GPIOA, BTN_left)){
		if(count_speed > 0){
			count_speed--;
		}
		else{
			count_speed = count_speed;
		}
	}
	MENU_PrintSpeed(count_speed);
}

void MENU_PrintSpeed(uint8_t speed){
	switch(speed){
	case 0:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_4[0]);
		break;
	case 1:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_5[0]);
		break;
	case 2:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_6[0]);
		break;
	default:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_4[0]);
		break;
	}
}

void MENU_PrintGame(void){
	LCD_nokia_clear();
	LCD_nokia_bitmap(CURRENT_GAME);
}
