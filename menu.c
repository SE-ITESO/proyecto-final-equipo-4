/*
 * menu.c
 *
 *  Created on: 26 nov 2023
 *      Author: arlet
 */

#include "menu.h"

static uint8_t test[] = {0xFF,0x01,0xFD,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0xFD,0x01,0xFF,
				  0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
				  0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
		          0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
		          0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0xFF,
				  0xFF,0x80,0xBF,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xBF,0x80,0xFF};

static uint8_t string_1[] = "LEVEL"; 	/*! String to be printed in the LCD*/
static uint8_t string_2[] = "0"; 		/*! String to be printed in the LCD*/
static uint8_t string_3[] = "SPEED"; 	/*! String to be printed in the LCD*/
static uint8_t string_4[] = "LOW"; 		/*! String to be printed in the LCD*/
static uint8_t string_5[] = "MED"; 		/*! String to be printed in the LCD*/
static uint8_t string_6[] = "HIG"; 	/*! String to be printed in the LCD*/

static uint8_t count_level = 0;
static uint8_t count_speed = 0;


void MENU_init(void){

	LCD_nokia_clear();
	LCD_nokia_bitmap(test);
	LCD_nokia_goto_xy(4,1); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_1[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(20,3); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_2[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(45,1); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_3[0]); 	/*! It print a string stored in an array*/
	LCD_nokia_goto_xy(52,3); 				/*! It establishes the position to print the messages in the LCD*/
	LCD_nokia_send_string(&string_4[0]); 	/*! It print a string stored in an array*/
}

void MENU_SetLevel(void){

	if(true == !GPIO_PinRead(GPIOA, BTN_right)){
		if(count_level < 5){
			count_level++;
		}
		else{
			count_level = count_level;
		}
	}
	else if(true == !GPIO_PinRead(GPIOA, BTN_left)){
		if(count_level > 0){
			count_level--;
		}
		else{
			count_level = count_level;
		}
	}
	MENU_PrintLevel(count_level);
}

void MENU_PrintLevel(uint8_t level){

	switch(level){
	case 0:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('0');
		break;
	case 1:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('1');
		break;
	case 2:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('2');
		break;
	case 3:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('3');
		break;
	case 4:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('4');
		break;
	case 5:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('5');
		break;
	default:
		LCD_nokia_goto_xy(20,3);
		LCD_nokia_send_char('0');
		break;
	}
}

void MENU_SetSpeed(void){

	if(true == !GPIO_PinRead(GPIOA, BTN_right)){
		if(count_speed < 2){
			count_speed++;
		}
		else{
			count_speed = count_speed;
		}
	}
	else if(true == !GPIO_PinRead(GPIOA, BTN_left)){
		if(count_speed > 0){
			count_speed--;
		}
		else{
			count_speed = count_speed;
		}
	}
	MENU_PrintSpeed(count_speed);
}

void MENU_PrintSpeed(uint8_t speed){
	switch(speed){
	case 0:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_4[0]);
		break;
	case 1:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_5[0]);
		break;
	case 2:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_6[0]);
		break;
	default:
		LCD_nokia_goto_xy(52,3);
		LCD_nokia_send_string(&string_4[0]);
		break;
	}
}
